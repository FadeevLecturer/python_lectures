
<!DOCTYPE html>

<html>
  
<head>
    <link rel="icon" type="image/png" href="..\..\favicon.png"/>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Создание и удаление объектов. Сборщик мусора &#8212; Практикум по компьютерным технологиям</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Последовательности: списки, кортежи и строки" href="sequencies.html" />
    <link rel="prev" title="Изменяемые и неизменяемый типы объектов" href="mutability.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/python-logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Практикум по компьютерным технологиям</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../docs/index.html">
   Практикум по компьютерным технологиям на языке программирования python3
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Лекция №1
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../docs/about_py.html">
   О питоне
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../docs/getting_started.html">
   Установка
   <code class="docutils literal notranslate">
    <span class="pre">
     python
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../docs/python_as_calculator.html">
   Python в качестве калькулятора
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../docs/jupyter_notebooks.html">
   Что такое Jupyter Notebooks?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="first_notebook.html">
   Основы работы с Jupyter Notebooks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="numbers_and_lists.html">
   Основные типы объектов в
   <code class="docutils literal notranslate">
    <span class="pre">
     python
    </span>
   </code>
   . Числа и списки
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="if_for_range.html">
   Операторы потока управления
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Лекция №2
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../docs/interpretability.html">
   Компилируемость vs Интерпретируемость
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dynamic_typing.html">
   Динамическая типизация
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="mutability.html">
   Изменяемые и неизменяемый типы объектов
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Создание и удаление объектов. Сборщик мусора
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="sequencies.html">
   Последовательности: списки, кортежи и строки
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Лекция №3
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../docs/libs_pypi_conda.html">
   Сторонние библиотеки и пакетные менеджеры
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../numpy/numpy.html">
   Знакомство с
   <code class="docutils literal notranslate">
    <span class="pre">
     NumPy
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../numpy/vectorization.html">
   Векторизация
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../numpy/slices.html">
   Срезы
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../numpy/vector_product.html">
   Умножение векторов
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../numpy/logic.html">
   Логические операции, булевые маски
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../numpy/vectorization_example.html">
   Векторизация на примере вычисления статистик
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../numpy/homework.html">
   Домашнее задание №2
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Лекция №4
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="dictionaries.html">
   Словари.
   <code class="docutils literal notranslate">
    <span class="pre">
     dict
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="functions.html">
   Функции
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="files.html">
   Работа с файлами
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="json.html">
   Формат json
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Лекция №5
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../visualization/matplotlib.html">
   matplotlib и другие графические библиотеки
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../visualization/matplotlib_animation.html">
   Анимация  в matplotlib
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../scipy/scipy.html">
   SciPy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../scipy/linalg.html">
   Линейная алгебра
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../scipy/interpolation_approx.html">
   Интерполяция функций, аппроксимация функций
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../scipy/integration.html">
   Определенные интегралы
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../scipy/ODE.html">
   Решение ОДУ
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../scipy/optimization.html">
   Оптимизация
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../scipy/nonlinear_equations.html">
   Решение нелинейных уравнений
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../scipy/cannonball.html">
   Пример
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../scipy/homework.html">
   Домашнее задание №3
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Лекция №6
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="python_scripts.html">
   Создание скриптов. Работа с IDE
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="scripts_vs_modules.html">
   Скрипты и модули
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="argparse.html">
   Аргументы командной строки
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Лекция №7
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../pandas/pandas.html">
   pandas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../pandas/series.html">
   pd.Series
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../pandas/dataframe.html">
   pd.DataFrame
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../pandas/datetime.html">
   Дата и время
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../pandas/covid19.html">
   Обзор базовых возможностей pandas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../pandas/homework.html">
   Домашнее задание №4
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Лекция №8
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="list_comprehensions.html">
   Основы списковых включений
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="iterators.html">
   Итераторы
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="decorators.html">
   Декораторы
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="generators.html">
   Генераторы
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="exercises1.html">
   Практические задания
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Лекция №9
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="custom_classes.html">
   Пользовательские классы
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="inheritance.html">
   Наследование
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="polymorphism.html">
   Полиморфизм в python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="operators_overloading.html">
   Перегрузка специальных методов и операторов
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="exercises2.html">
   Практические задания
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Лекция №10
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="exceptions.html">
   Исключения
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="custom_exceptions.html">
   Пользовательские исключения
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="LBYL_vs_EAFP.html">
   Стратегии контроля ошибок
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="exercises3.html">
   Практические задания
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Лекция №11
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../qt/gui.html">
   Графический пользовательский интерфейс
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../qt/basics.html">
   PySide. Основы
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../qt/event.html">
   События
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../qt/slot_signal.html">
   Слоты и сигналы
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../qt/widgets.html">
   Виджеты и макеты
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../qt/buttons.html">
   Кнопки
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../qt/output.html">
   Вывод данных
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../qt/input.html">
   Ввод данных
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../qt/dialogs.html">
   Диалоговые окна
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../qt/exercises4.html">
   Практические задания
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Лекции №12 и далее
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="about_12_and_so_on.html">
   О последних лекциях
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../computer_vision/basics.html">
   Работа с изображениями
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../computer_vision/filters.html">
   Свёрточные операции
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../computer_vision/detection.html">
   Задача обнаружения
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../machine_learning/regression.html">
   Регрессия
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../machine_learning/classification.html">
   Классификация
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../machine_learning/neural_networks.html">
   Нейронный сети
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/notebooks/python/garbage_collector.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/FadeevLecturer/python_lectures"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/FadeevLecturer/python_lectures/issues/new?title=Issue%20on%20page%20%2Fnotebooks/python/garbage_collector.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/FadeevLecturer/python_lectures/edit/main/notebooks/python/garbage_collector.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/FadeevLecturer/python_lectures/main?urlpath=tree/notebooks/python/garbage_collector.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/FadeevLecturer/python_lectures/blob/main/notebooks/python/garbage_collector.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   Создание объектов
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id3">
   Механизм подсчета ссылок на объект
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#python-del">
   Удаление объектов в
   <code class="docutils literal notranslate">
    <span class="pre">
     python
    </span>
   </code>
   . Ключевое слово
   <code class="docutils literal notranslate">
    <span class="pre">
     del
    </span>
   </code>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id4">
   Сборщик мусора
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Создание и удаление объектов. Сборщик мусора</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   Создание объектов
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id3">
   Механизм подсчета ссылок на объект
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#python-del">
   Удаление объектов в
   <code class="docutils literal notranslate">
    <span class="pre">
     python
    </span>
   </code>
   . Ключевое слово
   <code class="docutils literal notranslate">
    <span class="pre">
     del
    </span>
   </code>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id4">
   Сборщик мусора
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="id1">
<h1>Создание и удаление объектов. Сборщик мусора<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>Итого, в <code class="docutils literal notranslate"><span class="pre">python</span></code> все данные представляются в виде объектов, доступ к которым осуществляется или через имена/ссылки/идентификаторы в исходном коде программы.</p>
<div class="section" id="id2">
<h2>Создание объектов<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Создаются объекты в результате вычисления выражений <code class="docutils literal notranslate"><span class="pre">python</span></code>. Рассмотрим следующую строку кода.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">1001</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="s2">&quot;1002&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Когда интерпретатор исполняет исходный код, он сначала вычисляет выражение справа от оператора равно.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="mi">1001</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="s2">&quot;1002&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Так как это составное выражение, то чтобы его вычислить, сначала вычисляются подвыражения <code class="docutils literal notranslate"><span class="pre">1001</span></code> и <code class="docutils literal notranslate"><span class="pre">int(&quot;1002&quot;)</span></code>.</p>
<ol class="simple">
<li><p>Первое из них является <a class="reference external" href="https://docs.python.org/3/reference/lexical_analysis.html#literals">литералом</a> целого числа 1001. Его интерпретация приводит к целочисленного объекта с значением 1001.</p></li>
<li><p>Второе выражение тоже является составным.</p>
<ol class="simple">
<li><p>Сначала вычисляется выражение <code class="docutils literal notranslate"><span class="pre">&quot;1002&quot;</span></code>, указанное в качестве аргумента функции <code class="docutils literal notranslate"><span class="pre">int</span></code>. Это выражение является литералом строки, а значит его интерпретация приводит к созданию строкового объекта с значением <code class="docutils literal notranslate"><span class="pre">&quot;1002&quot;</span></code>.</p></li>
<li><p>Далее этот объект передаётся на вход функции <code class="docutils literal notranslate"><span class="pre">int</span></code>, что приводит к созданию целочисленного объекта с значением <code class="docutils literal notranslate"><span class="pre">1002</span></code>.</p></li>
</ol>
</li>
</ol>
<p>Затем интерпретатор применяет операцию сложения к объектам целочисленного типа, что приводит к созданию ещё одного целочисленного объекта с значением 2003.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2003
</pre></div>
</div>
</div>
</div>
<p>Далее имя <code class="docutils literal notranslate"><span class="pre">x</span></code> связывается с эти объектом. Итого, в результате вычисления этой строки кода была создано 4 объекта.</p>
<div class="figure align-default">
<img alt="../../_images/expressions.svg" src="../../_images/expressions.svg" /></div>
<p>Но как объекты в <code class="docutils literal notranslate"><span class="pre">python</span></code> удаляются? Прежде чем объяснить принцип удаления объектов из памяти, рассмотрим ключевой механизм для этого процесса.</p>
</div>
<div class="section" id="id3">
<h2>Механизм подсчета ссылок на объект<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Python</span></code> автоматически следит за тем, сколько ссылок существует ссылок на каждый объект в любой момент времени. Для этого каждый объект имеет специальное целочисленное поле, которое используется в качестве счетчика ссылок на этот объект. Каждый раз, когда на объект появляется новая ссылка, этот счетчик увеличивается на единицу.</p>
<p>Продемонстрировать этот эффект можно с помощью функции <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.getrefcount">getrefcount</a> из модуля стандартной библиотеки <a class="reference external" href="https://docs.python.org/3/library/sys.htm">sys</a>, которая как раз и возвращает количество ссылок на объект.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Важно учесть, что когда мы передаем объект на вход этой функции, создаётся временная ссылка на этот объект внутри неё, что приводит к тому, что она возвращает значение на 1 больше, чем можно было ожидать.</p>
</div>
<p>Так как <code class="docutils literal notranslate"><span class="pre">python</span></code> проводит ряд оптимизация при работе с неизменяемыми объектами (таких, как <a class="reference external" href="https://en.wikipedia.org/wiki/String_interning">интернирование строк</a> и малых целых чисел), то для чистоты эксперимента создадим изменяемый объект — пустой список, свяжем его с именем <code class="docutils literal notranslate"><span class="pre">a</span></code> и выведем количество ссылок на него.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">getrefcount</span>

<span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">getrefcount</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<p>Видим, что количество ссылок на этот объект равняется двум: одна из этих ссылок — имя <code class="docutils literal notranslate"><span class="pre">a</span></code>, другая — временная ссылка, созданная внутри функции <code class="docutils literal notranslate"><span class="pre">getrefcount</span></code> при передаче этого объекта в качестве аргумента.</p>
<div class="figure align-default">
<img alt="../../_images/refcount_1.svg" src="../../_images/refcount_1.svg" /></div>
<p>Создадим ещё пару ссылок на этот объект и снова напечатаем количество ссылок на список.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
<span class="nb">print</span><span class="p">(</span><span class="n">getrefcount</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">a</span>
<span class="nb">print</span><span class="p">(</span><span class="n">getrefcount</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3
4
</pre></div>
</div>
</div>
</div>
<p>Видим, что счетчик вырастает на 1, каждый раз, когда мы связываем новое имя с исходным объектом.</p>
<div class="figure align-default">
<img alt="../../_images/refcount_2.svg" src="../../_images/refcount_2.svg" /></div>
<p>Кроме имен программы на объект могут ссылаться другие объект (или даже тот же самый в предельном случае). Например, список хранит в себе ссылки на свои элементы.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">getrefcount</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>7
</pre></div>
</div>
</div>
</div>
<p>Созданный список <code class="docutils literal notranslate"><span class="pre">L=[a,</span> <span class="pre">a,</span> <span class="pre">a]</span></code> содержит 3 ссылки на исходный список, что отражается на увеличении счетчика ссылок.</p>
<div class="figure align-default">
<img alt="../../_images/refcount_3.svg" src="../../_images/refcount_3.svg" /></div>
<p>Также временные ссылки создаются при передаче объекта в качестве аргумента функции. Именно этим и объясняется увеличенное значение, возвращаемое функцией <code class="docutils literal notranslate"><span class="pre">getrefcount</span></code>.</p>
</div>
<div class="section" id="python-del">
<h2>Удаление объектов в <code class="docutils literal notranslate"><span class="pre">python</span></code>. Ключевое слово <code class="docutils literal notranslate"><span class="pre">del</span></code><a class="headerlink" href="#python-del" title="Permalink to this headline">¶</a></h2>
<p>Механизм подсчета ссылок используется для определения того, какие объекты можно удалять. Действительно, если ссылок на объект нет, то значит он <strong>недостижим</strong> для программы и его можно смело удалять.</p>
<p>Чтобы счетчик ссылок обнулился, необходимо чтобы пропали все ссылки на этот объект. Такое может происходить по разным причинам. Например, если связать какое-то существующее в программе имя с новым объектом, то пропадёт одна ссылка на объект, на которое это имя ссылалось прежде.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="mi">0</span>
<span class="nb">print</span><span class="p">(</span><span class="n">getrefcount</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>6
</pre></div>
</div>
</div>
</div>
<p>Видим, что связывание имени <code class="docutils literal notranslate"><span class="pre">b</span></code> с целочисленным объектом <code class="docutils literal notranslate"><span class="pre">0</span></code> привело к тому, что количество ссылок на пустой список, на который ссылалось имя <code class="docutils literal notranslate"><span class="pre">b</span></code> прежде, упало на 1.</p>
<div class="figure align-default">
<img alt="../../_images/refcount_4.svg" src="../../_images/refcount_4.svg" /></div>
<p>Кроме того с помощью ключевого слова <code class="docutils literal notranslate"><span class="pre">del</span></code> можно просто удалить имя из программы, а вместе с этим и ссылку на объект, на которое это имя ссылается. Чтобы удалить имя <code class="docutils literal notranslate"><span class="pre">name</span></code> из текущего пространства имён, используется следующий синтаксис.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">name</span>
</pre></div>
</div>
<p>Удалим имя <code class="docutils literal notranslate"><span class="pre">c</span></code> и убедимся, что количество ссылок упадёт ещё на 1.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">c</span>
<span class="nb">print</span><span class="p">(</span><span class="n">getrefcount</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5
</pre></div>
</div>
</div>
</div>
<div class="figure align-default">
<img alt="../../_images/refcount_5.svg" src="../../_images/refcount_5.svg" /></div>
<p>Локальные для функции имена удаляются автоматически при выходе из функции.</p>
<p>Если удаляется объект, то удаляются все его ссылки на другие объект. Чтобы продемонстрировать этот эффект, удалим список <code class="docutils literal notranslate"><span class="pre">L</span></code> и убедимся, что количество ссылок на <code class="docutils literal notranslate"><span class="pre">a</span></code> упадёт на 3.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">L</span>
<span class="nb">print</span><span class="p">(</span><span class="n">getrefcount</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<div class="figure align-default">
<img alt="../../_images/refcount_6.svg" src="../../_images/refcount_6.svg" /></div>
</div>
<div class="section" id="id4">
<h2>Сборщик мусора<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>На первый взгляд может показаться, что механизма подсчета ссылок хватает самого по себе для удаления всех недостижимых объектов, но это не так. Может сложиться патологическая ситуация, когда группа объектов циклически ссылается друг на друга, но ни на один из объектов этой группы нет ссылки снаружи. Такие объекты недостижимы для программы, а значит по хорошему их пора удалять, но на каждый из этих объектов все ещё существуют ссылки.</p>
<p>Воспроизведем такую ситуацию на примере двух списков.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">L1</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">L2</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">L1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">L2</span><span class="p">)</span>
<span class="n">L2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">L1</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">L1</span><span class="p">,</span> <span class="n">L2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[[...]]] [[[...]]]
</pre></div>
</div>
</div>
</div>
<p>Схема ниже иллюстрирует сложившуюся ситуацию.</p>
<div class="figure align-default">
<img alt="../../_images/cycle.png" src="../../_images/cycle.png" />
</div>
<p>Удалим изначальные ссылки <code class="docutils literal notranslate"><span class="pre">L1</span></code> и <code class="docutils literal notranslate"><span class="pre">L2</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">L1</span><span class="p">,</span> <span class="n">L2</span>
</pre></div>
</div>
</div>
</div>
<p>Теперь пропали все внешние ссылки на циклическую группу этих списков, т.е. они недостижимы для программы, но сами списки все ещё ссылаются друг на друга.</p>
<div class="figure align-default">
<img alt="../../_images/unreachable_cycle.png" src="../../_images/unreachable_cycle.png" />
</div>
<p>Чтобы обнаруживать такие ситуации в <code class="docutils literal notranslate"><span class="pre">python</span></code> есть <a class="reference external" href="https://ru.wikipedia.org/wiki/%D0%A1%D0%B1%D0%BE%D1%80%D0%BA%D0%B0_%D0%BC%D1%83%D1%81%D0%BE%D1%80%D0%B0">сборщик мусора</a>, который представляет собой отдельный процесс, который переодически запускается и занимается поиском недостижимых циклических структур и удаляет их.</p>
<p>Положительная сторона такого подхода заключается в том, что удаление объектов происходит полностью автоматически и у программиста нет необходимости удалять все объекты самостоятельно. Отрицательная — накладные расходы: помимо интересующей пользователя программы параллельно работает дополнительный процесс, который может вызвать небольшие замедления в её работе.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Модуль <a class="reference external" href="https://docs.python.org/3/library/gc.html">gc</a> предоставляет интерфейс к взаимодействию с сборщиком мусора. В частности, можно отключить автоматическую сборку мусора методом <a class="reference external" href="https://docs.python.org/3/library/gc.html#gc.disable">disable</a>, например, если сценарий программы не подразумевает создание циклических структур, или если стабильная производительность программы важнее потенциальной утечки программы. Кроме отключения сборщика мусора, с помощью этого модуля можно в ручную его запускать методом <a class="reference external" href="https://docs.python.org/3/library/gc.html#gc.collect">collect</a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Подробно прочитать о том, как работает сборщик мусора в <code class="docutils literal notranslate"><span class="pre">python</span></code> можно по <a class="reference external" href="https://devguide.python.org/garbage_collector/">ссылке в документации</a>.</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notebooks\python"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="mutability.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Изменяемые и неизменяемый типы объектов</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="sequencies.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Последовательности: списки, кортежи и строки</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Fadeev Egor<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>